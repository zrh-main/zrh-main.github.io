---
title: MySQL 约束
tags:
  - MySQL
categories:
  MySQL
---

# MySQL 约束
## 概述
对表中的数据进行限制，保证数据库的正确性，有效性和完成性。如果一个表添加了约束，不正确的数据将无法添加到表中。一般会在创建表的时候添加约束。
（约束会加在字段后面，对某一列的数据进行限制）
## 主键约束 
表的每一行都应该具有可以唯一标识自己的一列(或一组列);而这个承担标识作用的列称为主键
  - 唯一
  - 非空
  **主键列的值不建议修改**
主键可以在建表时声明
## 非空约束

## 外键约束
  - 用于关联父表
  - 表中非主键的字段指向另一个表的主键,这个字段叫做外键;一个表中可以有多个外键

## 外键的作用
  - 外键所在的表为子表;指向的主键所在的表为父表;
  - 对子表的作用:进行操作时,外键字段在父表中找不到对应的匹配,操作会失败
  - 对父表的作用:进行修改删除时,对应的主键在子表中被引用,操作会失败

## 约束模式
  - district 严格模式(默认) 父表不能删除修改子表引用的数据
  - cascade 级联模式()  父表操作后,子表关联的数据一起操作
  - set null  置空模式  外键值允许为null,父表操作后,子表对应的外键字段被置空

## 使用外键的条件
  - 表存储引擎必须是InnoDB,否则创建的外键无约束效果
  - 外键的类型必须和父表的主键类型一致
  - 外键的名字不能重复
  - 已存在数据的列设为外键时,必须和父表的主键数据对应

## 创建表时设置外键
  - `create table 表名(字段名,字段类型...,primary key(主键名),constraint '新建约束名' foreign key ('外键名') references 参照主键表名('主键名'));`

## 创建好的表添加外键约束
  - `alter table 表名 add constraimt 约束名称 foreign key(外键字段名) references 参照主键表名(主键字段名);`

## 删除外键
  - `alter table 表名 drop foreign key 外键名;`

## 复合键(组合键)
  - 将多个列作为一个索引键,一般用于复合索引

## 索引
使用索引可快速访问数据表中的特定信息,索引是对数据表中一列或多列的值进行排序的一种结构

## 参照完整性
参照完整性要求关系中不允许引用不存在的实体,与实体完整性是关系型数据模型必须满足的完整性约束条件;目的是保证数据的唯一性

## 键

## 多表之间的关系
一对一：
一对多：
设置：一般会让多的一方的一个字段去关联一的一方的主键。
多对多：
  如果两张表是多对多的关系，一般情况下会设置一张中间表，让中间表的两个字段分别去关联两张表的主键列


数据库范式
1.概述
满足一些规则来优化数据库的设计和存储，这些规则我们称为范式。
设计数据库的规范。
2.三大范式
目前的数据库范式一共有六种。第一范式（1NF），第二范式，第三范式，巴斯-科德范式，第四范式，第五范式（完美范式）。

第一范式：
原子性。数据库中每一列都是不可拆分的原子项。（列不可拆分，不能是数组		和集合）
第二范式：
在满足第一范式的基础上，表中的每一个字段都完全依赖于(码)主键。
（一张表只描述一件事情）
第三范式：
在满足第二范式的基础上，消除非主键列对主键的传递依赖。（表中的每一列		都完成依赖于主键）

## 数据库表的约束
  1. 概述
    对表中的数据进行限制，保证数据库的正确性，有效性和完成性。如果表添加了约束，不正确的数据将无法添加到表中。一般会在创建表的时候添加约束。(约束会加在字段后面，对某一列的数据进行限制)
  2. 分类
    唯一：数据唯一，不能重复。 `unique`
    非空：不能为空。   `not null`
    主键 ： 非空+唯一(一个表中只能有一个主键) `primary key`
    `auto_increment`  (自增，一般会和主键一起使用)
    默认值 `default` ，给某一列默认值。
