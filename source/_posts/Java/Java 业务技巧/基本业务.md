---
title: 基本业务
categories: Java
date: 2021-12-10 10:31:16
tags:
  - Java 业务技巧
---


## JAVA中List集合按照对象的某些字段去重实现

#### 方式一使用双重循环实现
案例:
``` Java
import org.apache.commons.lang3.StringUtils;
import java.util.*;
/**
 * @Auther: 
 * @Date: 2019/1/11 09:11
 * @Description: 根据list中对象指定的n个字段去重测试
 */
public class TestMyUser {
 
    @org.junit.Test
    public void test(){
        List<MyUser> list1 = new ArrayList<>();
        List<MyUser> list2 = new ArrayList<>();
        MyUser user1 = new MyUser();
        user1.setUserName("zhangsan");
        user1.setPassWord("123456");
        list1.add(user1);
 
        MyUser user2 = new MyUser();
        user2.setUserName("zhangsan");
        user2.setPassWord("123456");
        list1.add(user2);
 
        MyUser user3 = new MyUser();
        user3.setUserName("lisi");
        user3.setPassWord("123456");
        list1.add(user3);
 
        MyUser user4 = new MyUser();
        user4.setUserName("lisi");
        user4.setPassWord("123456");
        list1.add(user4);
        
        list1.stream().forEach(item->{
            list1.strean().forEach(item2->{
                if(item1.equals(item2)){
                    continue;
                }
                if(Integer.valueof(item1.getPassWord)>Integer.valueof(item2.getPassWord)){
                    list2.add(item2);
                }
            })
        })
        list1.removeAll(list2);
        list1.strean().forEach(System.out::plintln)
    }
 
}
```


#### 方式二使用比较器实现
案例:
``` Java
import org.apache.commons.lang3.StringUtils;
import java.util.*;
/**
 * @Auther: 
 * @Date: 2019/1/11 09:11
 * @Description: 根据list中对象指定的n个字段去重测试
 */
public class TestMyUser {
 
    @org.junit.Test
    public void test(){
        List<MyUser> list1 = new ArrayList<>();
        MyUser user1 = new MyUser();
        user1.setUserName("zhangsan");
        user1.setPassWord("123456");
        list1.add(user1);
 
        MyUser user2 = new MyUser();
        user2.setUserName("zhangsan");
        user2.setPassWord("123456");
        list1.add(user2);
 
        MyUser user3 = new MyUser();
        user3.setUserName("lisi");
        user3.setPassWord("123456");
        list1.add(user3);
 
        MyUser user4 = new MyUser();
        user4.setUserName("lisi");
        user4.setPassWord("123456");
        list1.add(user4);
        
        for (MyUser b: list1) {
            System.out.println("去重前："+b.toString());
        }
 
        //去重
        list1 = removeDuplicateOutputField(list1);
 
        for (MyUser b: list1) {
            System.out.println("去重后："+b.toString());
        }
    }
 
    /**
     * 根据list中对象某些字段去重
     * @param list 需要去重的list
     * @return 返回去重后的list
     */
    private static List<MyUser> removeDuplicateOutputField(List<MyUser> list) {
        Set<MyUser> set = new TreeSet<>(new Comparator<MyUser>() {
            @Override
            public int compare(MyUser o1, MyUser o2) {
                int compareToResult = 1;//==0表示重复
                //根据需求添加StringUtils.equals(o1.getUserName(), o2.getUserName()) ；
                if(StringUtils.equals(o1.getUserName(), o2.getUserName()) &&
                        StringUtils.equals(o1.getPassWord(), o2.getPassWord())) {
                    compareToResult = 0;
                }
                System.out.println("o1 = [" + o1.getUserName() + "], o2 = [" + 
                        o2.getUserName() + "]=" + compareToResult);
                return compareToResult;
            }
        });
        set.addAll(list);
        return new ArrayList<>(set);
    }
}
```
提示:**多个列表的不同属性实现去重时,可以定义个ertity实体,整合在一个列表后再去重**


