---
title: 访问量较大
tags:
  - 常见问题及解决方案
categories:
  - Java
---

## 引发问题
访问量较大,可能引发:服务器宕机;客户体验度不好

## 解决方案

### 优化SQL语句

### 避免直接查询数据库,使用缓存
这里使用redis进行缓存
1. 添加缓存依赖(pom)
    ``` xml
    <!-- redis -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-redis</artifactId>
    </dependency>
    <!-- spring2.X集成redis所需common-pool2-->
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-pool2</artifactId>
        <version>2.6.0</version>
    </dependency>
    ```
2. 创建配置类
    com.doyens.gmall.common.config.RedisConfig
3. 使用
    见名知意   set  key名称:id值  数据
4. 定义好的key名称
    com.doyens.gmall.common.constant.RedisConst
5. 缓存使用规则:
      查询时:  先访问缓存是否有数据
          true: 直接返回
          false: 没有,需要查询数据库,并将结果存储到缓存,同时将数据库数据返回给客户端.
      
### 异步加载